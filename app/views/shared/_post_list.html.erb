<% if notice %>
  <p id="notice" class="alert alert-success" role="alert"><%= notice %></p>
<% end %>

<main role="main">
  <div class="container">
    <div class="my-3 p-3 bg-white rounded shadow-sm">
      <h6 class="border-bottom border-gray pb-2 mb-0">Posts</h6>
      <% posts.sort_by(&:created_at).each do |post| %>
        <div class="media text-muted pt-3">
          <div class="d-flex justify-content-center align-items-center flex-column align-center" style='margin: 0 15px'>
            <%= link_to '<i class="fas fa-sort-up"></i>'.html_safe, post, method: :delete, data: {confirm: 'Are you sure?'} %>
            25
          </div>
          <p class="media-body pb-3 mb-0 small lh-125 border-bottom border-gray">
            <strong class="d-block text-gray-dark"><%= post.title %></strong>
            <strong class="d-block text-gray-dark">@<%= User.find(post.user_id).username %></strong>
            <%= post.description %>
            <br>
            <% if (Time.now - post.updated_at).to_i < 60 %>
              <small class="text-muted text-center">Posted <%= (Time.now - post.created_at).to_i %> sec. ago by @<%= User.find(post.user_id).username %>
              </small>
            <% elsif (Time.now - post.updated_at).to_i < 3600 %>
              <small class="text-muted text-center">Posted <%= (Time.now - post.created_at).to_i / 60 %> min.
                ago by @<%= User.find(post.user_id).username %>
              </small>
            <% elsif (Time.now - post.updated_at).to_i < (3600 * 24) %>
              <small class="text-muted text-center">Posted <%= (Time.now - post.created_at).to_i / 3600 %> hr.
                ago by @<%= User.find(post.user_id).username %>
              </small>
            <% else %>
              <small class="text-muted text-center">Last
                updated <%= (Time.now - post.updated_at).to_i / (3600 * 24) %> day(s) ago by @<%= User.find(post.user_id).username %>
              </small>
            <% end %></p>
          <div class="d-flex justify-content-center align-items-center flex-column align-center">
            <%# <% if current_user && (current_user.id == post.user_id || current_user.id == 1) %>
            <% if true %>
              <%= link_to '<i class="fas fa-trash"></i>'.html_safe, post, method: :delete, data: {confirm: 'Are you sure?'} %>
              <%= link_to '<i class="fas fa-pen"></i>'.html_safe, edit_post_path(post) %>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</main>
